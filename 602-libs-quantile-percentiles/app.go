package main

import (
	"fmt"

	"github.com/bmizerany/perks/quantile"
)

func main() {
	a := []float64{0, 10, 15, 20, 25, 30, 35, 40, 45, 50, 55, 60, 65, 70, 75, 80, 85, 90, 95, 100}

	// Compute the 50th, 90th, and 99th percentile.
	q := quantile.NewTargeted(0.50, 0.90, 0.99)
	for _, v := range a {
		q.Insert(v)
	}

	fmt.Println("perc50:", q.Query(0.50))
	fmt.Println("perc95:", q.Query(0.95))
	fmt.Println("count:", q.Count())

	big := []float64{
		527402,
		294000,
		196000,
		193946,
		190000,
		167000,
		165000,
		164000,
		145855,
		137000,
		134602,
		134000,
		132756,
		131000,
		130000,
		125707,
		122000,
		121000,
		112646,
		112483,
		110515,
		110488,
		110000,
		108000,
		108000,
		107000,
		105000,
		104404,
		103000,
		102173,
		102000,
		101167,
		100000,
		98000,
		97213,
		97000,
		97000,
		96000,
		96000,
		96000,
		94000,
		92190,
		91000,
		91000,
		91000,
		89000,
		89000,
		87044,
		86000,
		86000,
		86000,
		84968,
		84886,
		83498,
		83058,
		82000,
		81519,
		81000,
		81000,
		81000,
		79728,
		79016,
		79000,
		78000,
		78000,
		77000,
		77000,
		77000,
		77000,
		76000,
		76000,
		75000,
		74361,
		74158,
		74000,
		72000,
		71176,
		70873,
		70000,
		70000,
		69000,
		68000,
		68000,
		68000,
		68000,
		68000,
		67000,
		66000,
		66000,
		65000,
		64772,
		64000,
		64000,
		64000,
		63000,
		62408,
		62000,
		62000,
		61770,
		61046,
		61000,
		61000,
		61000,
		60000,
		59000,
		59000,
		59000,
		58781,
		58733,
		58027,
		57192,
		57000,
		57000,
		57000,
		57000,
		56202,
		56082,
		56000,
		56000,
		56000,
		56000,
		55163,
		55000,
		55000,
		55000,
		54715,
		54000,
		54000,
		53179,
		53000,
		53000,
		53000,
		53000,
		52307,
		52000,
		52000,
		52000,
		52000,
		52000,
		52000,
		51902,
		51777,
		51000,
		51000,
		51000,
		51000,
		50255,
		50000,
		50000,
		50000,
		50000,
		50000,
		49936,
		49000,
		49000,
		49000,
		49000,
		49000,
		49000,
		49000,
		48377,
		48000,
		47246,
		47000,
		47000,
		47000,
		46003,
		46000,
		46000,
		46000,
		46000,
		46000,
		46000,
		46000,
		45175,
		45000,
		45000,
		45000,
		44000,
		44000,
		44000,
		44000,
		44000,
		44000,
		43000,
		43000,
		43000,
		43000,
		43000,
		43000,
		42317,
		42000,
		42000,
		42000,
		42000,
		41085,
		41053,
		41000,
		41000,
		41000,
		40000,
		40000,
		40000,
		40000,
		39000,
		39000,
		39000,
		39000,
		39000,
		38000,
		38000,
		38000,
		37000,
		37000,
		36695,
		36394,
		36000,
		35709,
		35378,
		35350,
		35330,
		35000,
		35000,
		35000,
		35000,
		35000,
		35000,
		35000,
		34693,
		34224,
		34086,
		34000,
		34000,
		34000,
		34000,
		34000,
		34000,
		34000,
		34000,
		34000,
		34000,
		34000,
		34000,
		34000,
		34000,
		33764,
		33000,
		33000,
		33000,
		33000,
		33000,
		33000,
		33000,
		33000,
		33000,
		33000,
		32585,
		32299,
		32000,
		32000,
		32000,
		32000,
		32000,
		32000,
		31905,
		31046,
		31000,
		31000,
		30000,
		30000,
		30000,
		30000,
		29000,
		29000,
		28403,
		28000,
		28000,
		28000,
		28000,
		27000,
		27000,
		27000,
		27000,
		27000,
		27000,
		27000,
		27000,
		26016,
		26000,
		26000,
		26000,
		26000,
		26000,
		26000,
		26000,
		26000,
		25000,
		25000,
		25000,
		25000,
		25000,
		25000,
		25000,
		25000,
		23000,
		21000,
		19000,
		17363,
		17163,
		17000,
		17000,
		17000,
		16399,
		15000,
		14000,
		14000,
		14000,
		14000,
		14000,
		13000,
		12390,
		10772,
		10155,
		7747,
		7258,
		7092,
		7000,
		5000,
		5000,
		5000,
		4000,
		3000,
		1948,
		1000,
		1000,
		1000,
		1000,
		1000,
		1000,
		974,
		961,
		772,
		0,
	}

	q = quantile.NewTargeted(0.95)
	q.SetEpsilon(0)
	for _, v := range big {
		q.Insert(v)
	}

	fmt.Println("perc95:", q.Query(0.95))
	fmt.Println("count:", q.Count())

}
